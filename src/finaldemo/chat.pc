
chatFn = msg -> {
    print(msg ^ "\n\n");
    return read();
};

while(true) {
    msg = read();
    resp = distribute([msg], chatFn);
    print(resp[0]);
}
